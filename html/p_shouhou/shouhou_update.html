<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>后台</title>
	<link rel="stylesheet" type="text/css" href="../static/h-ui/css/H-ui.min.css" />
	<link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/H-ui.admin.css" />
	<link rel="stylesheet" type="text/css" href="../lib/Hui-iconfont/1.0.8/iconfont.css" />
	<link rel="stylesheet" type="text/css" href="../static/h-ui.admin/skin/default/skin.css" id="skin" />
	<link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/style.css" />

	<script type="text/javascript" src="../lib/jquery/1.9.1/jquery.min.js"></script> 
	<script type="text/javascript" src="../lib/layer/2.4/layer.js"></script>
	<script type="text/javascript" src="../static/h-ui/js/H-ui.min.js"></script> 
	<script type="text/javascript" src="../static/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer 作为公共模版分离出去-->

	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript" src="../lib/My97DatePicker/4.8/WdatePicker.js"></script> 
	<script type="text/javascript" src="../lib/datatables/1.10.0/jquery.dataTables.min.js"></script> 
	<script type="text/javascript" src="../lib/laypage/1.2/laypage.js"></script>
	<script type="text/javascript" src="../static/initdata.js"></script>

</head>
<body>
    <div>售后问题修改<div>
	
	<div class="page-container">
		<div class="text-c">
			<span>店铺<span>
			<span class="select-box inline">	
				<select id="shopType" name="shopType" class="select">
				</select>
			</span>
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			订单号/旺旺号（<font color="red">*</font>）：<input type="text" name="orderno" id="orderno" style="width:250px" class="input-text">
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			客户姓名：<input type="text" name="cusname" id="cusname" style="width:250px" class="input-text">
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			快递单号：<input type="text" name="transno" id="transno" style="width:250px" class="input-text">
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			事件类型（<font color="red">*</font>）
			<span class="select-box inline">	
				<select id="eventType" name="eventType" class="select">
				</select>
			</span>
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			处理金额(<font color="red">数字</font>)：<input type="text" name="fee" id="fee" style="width:250px" class="input-text">
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			原因：<textarea  id="reason" rows="2" style="width:250px" > </textarea>
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			是否已完成：<input type="radio" name="prostatus" value="2" />已完成&nbsp;&nbsp;<input type="radio" name="prostatus" value="1" />未完成
		</div>
		<div class="text-c">
			处理备注：<textarea  id="dealremark" rows="2" style="width:250px" > </textarea>
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			是否丢件：<input type="radio" name="misstatus" value="2" />未丢件&nbsp;&nbsp;<input type="radio" name="misstatus" value="1" />已丢件
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			丢件订单金额：(<font color="red">数字</font>)：<input type="text" name="orderFee" id="orderFee" style="width:250px" class="input-text">
		</div>
		<div style="height:10px"></div>
		<div class="text-c">
			<button id="savebtn" type="button" onclick="savedata()">保存</button>
		</div>
		

	</div>
	</div>
	
	<script type="text/javascript">
	
		var id = getUrlParam("id");
	
		$(document).ready(function(){
		  //$.ajax({url:"/shouhouList/findById?id="+id,success:function(result){
			var result = "{\"code\":200,\"message\":\"查询成功\",\"data\":{\"id\":\"1\",\"ids\":null,\"sortColumns\":null,\"shop\":\"tm-lqy\",\"shops\":null,\"createTime\":\"2018-11-13 20:58:32\",\"createTimeGte\":null,\"createTimeLte\":null,\"updateTime\":\"2018-11-13 20:58:35\",\"updateTimeGte\":null,\"updateTimeLte\":null,\"createBy\":\"1\",\"updateBy\":\"1\",\"orderNo\":\"11111\",\"orderNoLike\":null,\"cusName\":\"1212\",\"transNo\":\"123123123\",\"fee\":10.00,\"reason\":\"123123123\",\"eventType\":\"123\",\"dealStatus\":1,\"dealRemark\":\"123123123\",\"miss\":1,\"orderFee\":65.26}}";
			var res = JSON.parse(result);
			if(res.data) {
				initSelect("shop","shopType",res.data.shop);
				initSelect("et","eventType",res.data.eventType);	
				$("#shopType").val(res.data.shop);
				$("#orderno").val(res.data.orderNo);
				$("#cusname").val(res.data.cusName);
				$("#transno").val(res.data.transNo);
				$("#eventType").val(res.data.eventType);
				$("#fee").val(res.data.fee);
				$("#reason").text(res.data.reason);
				$("input[name='prostatus'][value='"+res.data.dealStatus+"']").attr("checked",true);
				$("input[name='misstatus'][value='"+res.data.miss+"']").attr("checked",true);						
				$("#orderFee").val(res.data.orderFee);
				$("#dealremark").text(res.data.dealRemark);
			}else {
				initSelect("shop","shopType");
				initSelect("et","eventType");
			}
	
		  //}});
		  	  
		});
		
		function savedata() {
			var shopType=$("#shopType").val();
			var orderno = $("#orderno").val();
			var cusname = $("#cusname").val();
			var transno = $("#transno").val();
			var eventType = $("#eventType").val();
			var fee = $("#fee").val();
			var reason = $("#reason").text();
			var prostatus = $("input[name='prostatus']:checked").val();
			var misstatus = $("input[name='misstatus']:checked").val();			
			var orderFee = $("#orderFee").val();
			var dealremark = $("#dealremark").text();
			$.ajax({type: 'POST',url: "/shouhouList/update",data:{"id":id,"shop":shopType,"orderNo":orderno,"cusName":cusname,"transNo":transno,"eventType":eventType,
				"fee":fee,"reason":reason,"dealStatus":prostatus,"dealRemark":dealremark, "miss":misstatus,"orderFee":orderFee},
			  success: function(data){
				alert("success!");
				window.location.href="shouhou_list.html";
			  },
			  dataType: "json"
			});
		}
		
	
	
	</script>
	
<body>	
</html>